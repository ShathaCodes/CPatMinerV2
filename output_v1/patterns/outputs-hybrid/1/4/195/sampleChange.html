<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3>1ed39372ad8a3ce24b97679d41e61f401d854816,guava/src/com/google/common/collect/Streams.java,Streams,mapWithIndex,#Stream#FunctionWithIndex#,347
</h3><h3>Before Change</h3><pre><code class='java'>

    if (!fromSpliterator.hasCharacteristics(Spliterator.SUBSIZED)) {
      Iterator&lt;T&gt; fromIterator = Spliterators.iterator(fromSpliterator);
      return StreamSupport.<a id="change">stream(
          </a>new AbstractSpliterator&lt;R&gt;(
              fromSpliterator.estimateSize(),
              fromSpliterator.characteristics() & (Spliterator.ORDERED | Spliterator.SIZED)) {
            long index = 0;

            @Override
            public boolean tryAdvance(Consumer&lt;? super R&gt; action) {
              if (fromIterator.hasNext()) {
                action.accept(function.apply(fromIterator.next(), index++));
                return true;
              }
              return false;
            }
          },
          isParallel<a id="change">)</a>;
    }
    class Splitr extends MapWithIndexSpliterator&lt;Spliterator&lt;T&gt;, R, Splitr&gt; implements Consumer&lt;T&gt; {
      T holder;</code></pre><h3>After Change</h3><pre><code class='java'>

    if (!fromSpliterator.hasCharacteristics(Spliterator.SUBSIZED)) {
      Iterator&lt;T&gt; fromIterator = Spliterators.iterator(fromSpliterator);
      return StreamSupport.<a id="change">stream(
          </a>new AbstractSpliterator&lt;R&gt;(
              fromSpliterator.estimateSize(),
              fromSpliterator.characteristics() & (Spliterator.ORDERED | Spliterator.SIZED)) {
            long index = 0;

            @Override
            public boolean tryAdvance(Consumer&lt;? super R&gt; action) {
              if (fromIterator.hasNext()) {
                action.accept(function.apply(fromIterator.next(), index++));
                return true;
              }
              return false;
            }
          },
          isParallel<a id="change">)</a>.<a id="change">onClose(stream::close</a><a id="change">)</a>;
    }
    class Splitr extends MapWithIndexSpliterator&lt;Spliterator&lt;T&gt;, R, Splitr&gt; implements Consumer&lt;T&gt; {
      T holder;</code></pre>