<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3>1bfbc64ee02ecb3b03c2d19c5bd3bebcda19c67a,guava-gwt/src-super/com/google/common/collect/super/com/google/common/collect/LinkedListMultimap.java,LinkedListMultimap,addNode,#K#V#Node#,185
</h3><h3>Before Change</h3><pre><code class='java'>
    Node&lt;K, V&gt; node = new Node&lt;K, V&gt;(key, value);
    if (head == null) { // empty list
      head = tail = node;
      <a id="change">keyToKeyHead</a>.<a id="change">put(key</a>, <a id="change">node</a><a id="change">)</a>;
      <a id="change">keyToKeyTail</a>.<a id="change">put(key</a>, <a id="change">node</a><a id="change">)</a>;
    } else if (nextSibling == null) { // non-empty list, add to tail
      tail.next = node;
      node.previous = tail;
      Node&lt;K, V&gt; keyTail = <a id="change">keyToKeyTail</a>.<a id="change">get(</a>key<a id="change">)</a>;
      if (keyTail == null) { // first for this key
        <a id="change">keyToKeyHead</a>.<a id="change">put(key</a>, <a id="change">node</a><a id="change">)</a>;
      } else {
        keyTail.nextSibling = node;
        node.previousSibling = keyTail;
      }
      <a id="change">keyToKeyTail</a>.<a id="change">put(key</a>, <a id="change">node</a><a id="change">)</a>;
      tail = node;
    } else { // non-empty list, insert before nextSibling
      node.previous = nextSibling.previous;
      node.previousSibling = nextSibling.previousSibling;
      node.next = nextSibling;
      node.nextSibling = nextSibling;
      if (nextSibling.previousSibling == null) { // nextSibling was key head
        <a id="change">keyToKeyHead</a>.<a id="change">put(key</a>, <a id="change">node</a><a id="change">)</a>;
      } else {
        nextSibling.previousSibling.nextSibling = node;
      }
      if (nextSibling.previous == null) { // nextSibling was head
        head = node;
      } else {
        nextSibling.previous.next = node;
      }
      nextSibling.previous = node;
      nextSibling.previousSibling = node;
    }
    <a id="change">keyCount</a>.<a id="change">add(key</a><a id="change">)</a>;
    return node;
  }
</code></pre><h3>After Change</h3><pre><code class='java'>
   * for an node for the same {@code key}!
   */
  private Node&lt;K, V&gt; addNode(
      @Nullable K <a id="change">key</a>, @Nullable V value, @Nullable Node&lt;K, V&gt; nextSibling) {
    Node&lt;K, V&gt; <a id="change">node</a> = new Node&lt;K, V&gt;(key, value);
    if (head == null) { // empty list
      head = tail = node;
      <a id="change">keyToKeyList</a>.<a id="change">put(key</a>, <a id="change">new KeyList&lt;K, V&gt;(node</a><a id="change">))</a>;
      modCount++;
    } else if (nextSibling == null) { // non-empty list, add to tail
      tail.next = node;
      node.previous = tail;
      tail = node;
      KeyList&lt;K, V&gt; <a id="change">keyList</a> = <a id="change">keyToKeyList</a>.<a id="change">get(key</a><a id="change">)</a>;
      if (keyList == null) {
        <a id="change">keyToKeyList</a>.<a id="change">put(key</a>, <a id="change">keyList</a> = <a id="change">new KeyList&lt;K, V&gt;(node</a><a id="change">)</a><a id="change">)</a>;
        modCount++;
      } else {
        <a id="change">keyList.count++</a>;
        Node&lt;K, V&gt; keyTail = keyList.tail;
        keyTail.nextSibling = node;
        node.previousSibling = keyTail;
        <a id="change">keyList.tail</a> = <a id="change">node</a>;
      }
    } else { // non-empty list, insert before nextSibling
      KeyList&lt;K, V&gt; <a id="change">keyList</a> = <a id="change">keyToKeyList</a>.<a id="change">get(</a>key<a id="change">)</a>;
      <a id="change">keyList.count</a>++;
      node.previous = nextSibling.previous;
      node.previousSibling = nextSibling.previousSibling;
      node.next = nextSibling;</code></pre>